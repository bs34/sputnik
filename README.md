![Alt Text](./art/logo.png) 

# Sputnik
### What is it?

Sputnik is a multi tool gradle plugin to help with common tedious tasks to do with gradle things.

It can :
* Generate the 'versionName', 'versionCode' and apk file name for a project. 
* Add relevant proguard file to the application.
* Perform checkstyle, findbugs, lint and PMD code quality checks during the build process of the application.

### Versioning and APK naming

### Proguard
Available proguard files can be found at `sputnik/resources/proguard` or by running the gradle task `listProguard` to print the
various keys for each proguard file that can be used. By default Sputnik will add the projects `proguard-rules.pro` file, or if it 
is a library project the `proguard-library.pro` file will be added. It will also add the standard Android proguard file `proguard-android.txt`, 
but the optimized version `proguard-android-optimize.txt` is also available for your proguarding pleasure.

To add proguard files to your project : 
 ```groovy
 sputnik.proguard {
     include "android-optimize", "android-v7", "android-design"
     exclude "android"
 }
 ```
The exclude call isn't needed unless there is a file you explicitly want to exclude. e.g. if you want to add the 
optimized Android proguard file instead of the standard version.

Then all you need to do is enable proguard within your projects buildType 

```groovy
 buildType {
   release {
     minifyEnabled true
     shrinkResources true
   }
 }
```

You can also delete the default `proguardFiles getDefaultProguardFile...`call as the proguard files will be applied using Sputnik from now on.

### Code quality
Sputnik by default will enable all code quality checks. To disable add the following to your `build.gradle`

```groovy
sputnik.enableQuality(false)
```
 
### How to use it

To add Sputnik to a project update the root `build.gradle` buildscript to include the following : 

```groovy 
buildscript {
    repositories {
        // For stable releases.
        maven { url "https://apps.tapadoo.com/nexus/content/repositories/tapadoo" }
        // For SNAPSHOT releases.
        maven { url "https://apps.tapadoo.com/nexus/content/repositories/snapshots/" }
    }
    
    dependencies {
        classpath group: 'com.tapadoo.android', name: 'sputnik', version: '0.6.5'
    }
}
```

You then need to apply the plugin to the projects `build.gradle`
 
```groovy 
apply plugin: 'sputnik'
```

#### Simple usage
To 

To configure Sputnik add the following, **BEFORE** (or else Sputnik will be kaput) the Android block: 

```groovy 
sputnik {
    versionName {
        versionMajor 1
        versionMinor 2
        versionPatch 3
    }
    versionCode {
        baseValue 1
        codeType com.tapadoo.sputnik.options.VersionCodeType.DEFAULT
    }
    apkName {
        renameOutput true
        nameFormat '${appName}-${versionName}'
    }
}

android {
    ...
}

```

You can then update the project to use the `versionName` and `versionCode` generated by Sputnik.
 
```groovy
android {
    sputnik.versionName
    sputnik.versionCode
}

```